!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],n):n(e.xaret={},e.React)}(this,function(e,n){"use strict";function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e,n){return n={exports:{}},e(n,n.exports),n.exports}function i(e,n){e.at=0,e.doSubscribe(n),e.at=1}function a(e,n,r){if(m(e))return r[n.at++];if(k(e)){for(var t=e,i=0,u=e.length;i<u;++i){var o=e[i],l=o;m(o)?l=r[n.at++]:k(o)&&(l=a(o,n,r)),l!==o&&(t===e&&(t=e.slice(0)),t[i]=l)}return t}return e}function u(e,n){var r=e.props,t=null,i=null,u=null;e.at=0;for(var o in r){var l=r[o];S===o?u=a(l,e,n):"$$type"===o?t=r[o]:A===o?(i=i||{}).ref=m(l)?n[e.at++]:l:m(l)?(i=i||{})[o]=n[e.at++]:O===o?(i=i||{}).style=function(e,n,r){var t=null;for(var i in e){var a=e[i];if(m(a)){if(!t){t={};for(var u in e){if(u===i)break;t[u]=e[u]}}t[i]=r[n.at++]}else t&&(t[i]=a)}return t||e}(l,e,n):(i=i||{})[o]=l}return u instanceof Array?R.apply(null,[t,i].concat(u)):null!==u?R(t,i,u):R(t,i)}function o(e,n,r){for(var t=0,i=e.length;t<i;++t){var a=e[t];m(a)?r(n,a):k(a)&&o(a,n,r)}}function l(e,n,r){for(var t in e){var i=e[t];if(m(i))r(n,i);else if(S===t)k(i)&&o(i,n,r);else if(O===t)for(var a in i){var u=i[a];m(u)&&r(n,u)}}}function s(e,n){return function(r){return e({type:n,value:r})}}function f(e){e.subscription.unsubscribe()}function c(e,n){var r=n.subscribe({next:s(e,M),error:s(e,P),complete:s(e,$)});e.subscription=r}function v(e,n){for(var r=n.length;e<r;++e){var t=n[e];if(m(t)||k(t)&&v(0,t))return!0}return!1}function d(e,n){var r={$$type:e};for(var t in n){var i=n[t];"ref"===t?r[A]=i:W!==t&&(r[t]=i)}return r}var h="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},p=t(function(e,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e){var n,r=e.Symbol;return"function"==typeof r?r.observable?n=r.observable:(n=r("observable"),r.observable=n):n="@@observable",n}});r(p);var b=t(function(e,n){Object.defineProperty(n,"__esModule",{value:!0});var r,t=function(e){return e&&e.__esModule?e:{default:e}}(p);r="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==h?h:e;var i=(0,t.default)(r);n.default=i});r(b);const y=b.default;var m=e=>Boolean(e&&e[y]),w=require("infestines"),g=w.array0,x=w.dissocPartialU,_=w.inherit,k=w.isArray,U=w.isString,j=w.object0,M="value",P="error",$="end",O="style",S="children",W="xaret-lift",A="$$ref",R=n.createElement,q=n.Component,C=_(function(e){q.call(this,e),this.at=0},q,{componentWillReceiveProps:function(e){this.componentWillUnmount(),i(this,e)},componentWillMount:function(){i(this,this.props)}}),E=_(function(e){C.call(this,e),this.handlers=null,this.rendered=null},C,{componentWillUnmount:function(){var e=this.hanlders.pop();e&&f(e)},doSubscribe:function(e){var n=this,r=e.observable;if(m(r)){var t=function(e){switch(e.type){case M:n.rendered=e.value||null,n.at&&n.forceUpdate();break;case P:throw e.value;case $:n.callback=null}};this.hanlders=t,c(t,r)}else this.rendered=r||null;this.at=1},render:function(){return this.rendered}}),F=_(function(e){C.call(this,e),this.values=this,this.handlers=null},C,{componentWillUnmount:function(){var e=this.handlers;e instanceof Function?l(this.props,e,f):e&&l(this.props,e.reverse(),function(e,n){var r=e.pop();r&&f(r)})},doSubscribe:function(e){var n=this;this.values=0,l(e,this,function(e){e.values+=1});var r=this.values;switch(r){case 0:this.values=g;break;case 1:this.values=this,l(e,this.handlers=function(e){switch(e.type){case M:var r=e.value;n.values!==r&&(n.values=r,n.at&&n.forceUpdate());break;case P:throw e.value;default:n.values=[n.values],n.handlers=null}},c);break;default:this.values=Array(r).fill(this),this.handlers=[],l(e,this,function(e,n){var r=function n(r){for(var t=e.handlers,i=0;t[i]!==n;)++i;switch(r.type){case M:var a=r.value,u=e.values;u[i]!==a&&(u[i]=a,e.at&&e.forceUpdate());break;case P:throw r.value;default:t[i]=null;var o=t.length;if(o!==e.values.length)return;for(var l=0;l<o;++l)if(t[l])return;e.handlers=null}};e.handlers.push(r),c(r,n)})}},render:function(){if(this.handlers instanceof Function){var e=this.values;return e===this?null:u(this,[e])}for(var n=this.values,r=0,t=n.length;r<t;++r)if(n[r]===this)return null;return u(this,n)}});e.fromRx=function(e){return R(E,{observable:e})},e.createElement=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var t=n[0],i=n[1]||j;return(U(t)||i[W])&&(v(2,n)||function(e){for(var n in e){var r=e[n];if(m(r))return!0;if(S===n){if(k(r)&&v(0,r))return!0}else if(O===n)for(var t in r)if(m(r[t]))return!0}return!1}(i)?(n[1]=d(t,i),n[0]=F):i[W]&&(n[1]=x(W,i)||j)),R.apply(void 0,n)},e.fromClass=function(e){return function(n){return R(F,d(e,n))}},Object.defineProperty(e,"__esModule",{value:!0})});
