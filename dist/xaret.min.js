!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("react"),require("infestines")):"function"==typeof define&&define.amd?define(["exports","react","infestines"],r):r(n.xaret={},n.React,n.I)}(this,function(n,r,e){"use strict";function i(n,r,t){if(console.log("Enter children!!!!"),U(n))return console.log("Childres is obs",n),t[++r[0]];if(e.isArray(n)){console.log("Childres is array",n);for(var s=n,o=0,u=n.length;o<u;++o){var l=n[o],a=l;U(l)?a=t[++r[0]]:e.isArray(l)&&(a=i(l,r,t)),a!==l&&(s===n&&(s=n.slice(0)),s[o]=a)}return s}return n}function t(n,r,e){var i=void 0;for(var t in n){var s=n[t];if(U(s)){if(!i){i={};for(var o in n){if(o===t)break;i[o]=n[o]}}i[t]=e[++r[0]]}else i&&(i[t]=s)}return i||n}function s(n,r){var e=null,s=null,o=null,u=[-1];console.log(n,r);for(var l in n){var a=n[l];y===l?o=i(a,u,r):"$$type"===l?e=n[l]:g===l?(s=s||{}).ref=U(a)?r[++u[0]]:a:U(a)?(s=s||{})[l]=r[++u[0]]:p===l?(s=s||{}).style=t(a,u,r)||a:(s=s||{})[l]=a}return o instanceof Array?x.apply(null,[e,s].concat(o)):o?x(e,s,o):x(e,s)}function o(n,r,i){for(var t=0,s=n.length;t<s;++t){var u=n[t];U(u)?i(r,u):e.isArray(u)&&o(u,r,i)}}function u(n,r,i){for(var t in n){var s=n[t];if(U(s))i(r,s);else if(y===t)e.isArray(s)&&o(s,r,i);else if(p===t)for(var u in s){var l=s[u];U(l)&&i(r,l)}}}function l(n){n.values+=1}function a(n,r){n.subscription=r.subscribe(n.next,n.error,n.complete)}function c(n,r){var e=function r(){for(var e=n.handlers,i=0;e[i]!==r;)++i;r.next=function(r){var e=n.values;e[i]!==r&&(e[i]=r,n.forceUpdate())},r.error=function(n){throw n},r.complete=function(){e[i]=null;var r=e.length;if(r===n.values.length){for(var t=0;t<r;++t)if(e[t])return;n.handlers=null}}};n.handlers.push(e),a(e,r)}function f(n){n.subscription&&n.subscription.unsubscribe()}function h(n,r){for(var i=r.length;n<i;++n){var t=r[n];if(U(t)||e.isArray(t)&&h(0,t))return!0}return!1}function v(n){for(var r in n){var i=n[r];if(U(i))return!0;if(y===r){if(e.isArray(i)&&h(0,i))return!0}else if(p===r)for(var t in i)if(U(i[t]))return!0}return!1}function d(n,r){var e={$$type:n};for(var i in r){var t=r[i];"ref"===i?e[g]=t:m!==i&&(e[i]=t)}return e}var b=require("rxjs/Rx"),p="style",y="children",m="xaret-lift",g="$$ref",x=r.createElement,A=r.Component,U=function(n){return n instanceof b.Observable},$=e.inherit(function(n){A.call(this,n)},A,{componentWillReceiveProps:function(n){this.componentWillUnmount(),this.doSubscribe(n)},componentWillMount:function(){this.doSubscribe(this.props)}}),j=e.inherit(function(n){$.call(this,n),this.callback=null,this.rendered=null},$,{componentWillUnmount:function(){this.subscription&&this.subscription.unsubscribe()},doSubscribe:function(n){var r=this,e=n.observable;if(U(e)){this.subscription=e.subscribe(function(n){r.rendered=n||null,r.forceUpdate()},function(n){throw n},function(){r.subscription=null})}else this.rendered=e||null},render:function(){return this.rendered}}),S=e.inherit(function(n){$.call(this,n),this.values=this,this.handlers=null},$,{componentWillUnmount:function(){var n=this.handlers;n instanceof Function?n.subscription.unsubscribe():n&&n.forEach(f)},doSubscribe:function(n){var r=this;this.values=0,u(n,this,l);var i=this.values;switch(i){case 0:this.values=e.array0;break;case 1:this.values=this;var t=function(){};t.next=function(n){r.values!==n&&(r.values=n,r.forceUpdate())},t.error=function(n){throw n},t.complete=function(){r.values=[r.values],r.handlers=null},this.handlers=t,u(n,t,a);break;default:this.values=Array(i).fill(this),this.handlers=[],u(n,this,c)}},render:function(){if(this.handlers instanceof Function){var n=this.values;return n===this?null:s(this.props,[n])}for(var r=this.values,e=0,i=r.length;e<i;++e)if(r[e]===this)return null;return s(this.props,r)}});n.fromRx=function(n){return x(j,{observable:n})},n.createElement=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var t=r[0],s=r[1]||e.object0;return(e.isString(t)||s[m])&&(h(2,r)||v(s)?(r[1]=d(t,s),r[0]=S):s[m]&&(r[1]=e.dissocPartialU(m,s)||e.object0)),x.apply(void 0,r)},n.fromClass=function(n){return function(r){return x(S,d(n,r))}},Object.defineProperty(n,"__esModule",{value:!0})});
